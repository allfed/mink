#!/bin/bash

# this is a script to do country level aggregations based on some
# basic country boundaries. the immediate ancestor of this script
# was GISbox: ~grass/grass_scripts/crop_modeling/improved_calendars_15dec09/DEBUG_sound_bites_02jun10.sh

# what we get out are two text files. one has a bunch of notes so that you can
# recreate the aggregations and tell where they came from
#
# the second has the actual aggregations which compute total areas and productions
# within geographic regions (typically countries). these are then made into weighted-average-yields
# and are compared between two time periods.




output_dir=./SB/ # defines the directory where the output files should be placed

# in the past, and possibly again in the future, we have been concerned about
# unreasonably large changes in yields due to extreme circumstances and/or
# small data sizes for some regions. this variable allows you to put a cap
# on at the pixel level to censor growth to no more than this fractional amount.
# for example, we might decide that a yield increase of more than 20% is
# ridiculous; hence, we would set the maximum fractional change at the
# pixel level to be 0.2
#
# recently, we have been confident enough in the results to use them as is.
# to accept all yield changes as they are, use the string "none"


# this id forms the basis of the output filename. something descriptive
# is helpful. the date and time will be appended to this so you can
# tell different runs apart

# id=ARBSINGLE_feedthefutureFIRST_
#id=ARBSINGLE_seasia_enso_

id=ARBSINGLE_senegal_

# the aggregation must take place at some resolution. the simplest
# way to do this is to give an example of a raster that the masks
# and aggregating should line up with. typically, this matches
# the weighting rasters (i.e., the physical area maps)

#align_raster=GROU.R_physical_area@spam2005_30may14
#echo -e "\n\n\n\n\n\n\n\n\n\n!!!! using elevation_1m_world as align raster; change!!!!\n\n\n\n\n\n\n\n\n\n"
#sleep 5s
#align_raster=elevation_1km_world@PERMANENT
#align_raster=GROU.R_physical_area@spam2005_12aug13
#align_raster=RICE.I_physical_area@spam_05nov09
#align_raster=RICE.I_physical_area@spam_14feb12
#align_raster=Current_IB00000005_local_stuff_yield@speed_test4
align_raster=GROU.R_physical_area@spam2005_v3

# we now must define the various crop cases that we want to
# consider. sometimes this is sourced in from another file so that
# we don't have to have a massive list right here.
# to do that, use a command like: source bunch_o_lists.sh
#
# the list is one case per line with the contents tab delimited
# the columns are as follows:
# crop name: a name describing the crop and any specifics related to it (e.g., if you are comparing
#            multiple varieties of rice, you might have riceA, riceB, riceC, or something)
# water source: rainfed or irrigated. this is just for naming, so could get co-opted for another use
#               but it is usually handy to have rainfed and irrigated split out
# weighting/area raster: this is the raster that will be assumed to be the area when computing
#                        production = area * yield. typically we have used the SPAM area for
#                        the crop
# climate case: this is a name for the climate case. if comparing everything against the baseline,
#               you can simply put in information about the future climate and co2 assumption. again
#               this is just a naming thing, but it is handy and best if it is accurate
#               and the contents are systematically chosen
# baseline yield: this is the "before" yields to consider. typically (but not always), these are base_2000
#
# alternate yield: this is the "after" yields to consider. the percentage changes are computed via
#                  100 * (after - before) / before
# minimum capping threshold (optional): if it is desired to imposing capping on the yield changes, it might
#                                       be good to allow large changes for this starting at very low levels
#                                       to begin with. this lets you define what you mean by "starting from
#                                       a low base". however, this is optional with the default being that
#                                       the capping is always imposed (unless, of course, the capping fraction
#                                       is set to "none")
#
# comment 1 (crop) / comment 2 (water source) / weighting raster (SPAM) / comment 3 (GCM) / raster of interest




# g.mlist rast mapset=ricky_DSSAT_h15test_gr pat=best_yield*GEO*


if [ 0 = 1 ]; then # cutout AAA

brute_force_list=\
"
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	base_2000	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	miroc/2055	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn
beans	irrigated	BEAN.I_physical_area@spam2005_30may14	noresm/2055	best_yield_scr_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_beans__irrigated_yield_mean@ricky_DSSAT_h15test_bn

beans	rainfed	BEAN.R_physical_area@spam2005_30may14	base_2000	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn
beans	rainfed	BEAN.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn
beans	rainfed	BEAN.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn
beans	rainfed	BEAN.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn
beans	rainfed	BEAN.R_physical_area@spam2005_30may14	miroc/2055	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn
beans	rainfed	BEAN.R_physical_area@spam2005_30may14	noresm/2055	best_yield_scr_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_beans__rainfed_yield_mean@ricky_DSSAT_h15test_bn



groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	irrigated	GROU.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_groundnuts__irrigated_yield_mean@ricky_DSSAT_h15test_gr

groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr
groundnuts	rainfed	GROU.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_groundnuts__rainfed_yield_mean@ricky_DSSAT_h15test_gr


maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz
maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz
maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz
maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz
maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz
maize	irrigated	MAIZ.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEOfixIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_maize__irrigated_yield_mean@ricky_DSSAT_h15test_mz

maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz
maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz
maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz
maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz
maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz
maize	rainfed	MAIZ.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEOfixRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_maize__rainfed_yield_mean@ricky_DSSAT_h15test_mz



potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_base_2000_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt
potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt
potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt
potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt
potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt
potatoes	irrigated	POTA.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_potatoes__irrigated_yield_mean@ricky_DSSAT_h15test_pt

potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_base_2000_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt
potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt
potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt
potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt
potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt
potatoes	rainfed	POTA.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_growncoarse_potato_season_onset_full_24jun14_grown_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_potatoes__rainfed_yield_mean@ricky_DSSAT_h15test_pt



rice	irrigated	RICE.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri
rice	irrigated	RICE.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri
rice	irrigated	RICE.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri
rice	irrigated	RICE.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri
rice	irrigated	RICE.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri
rice	irrigated	RICE.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_rice__irrigated_yield_mean@ricky_DSSAT_h15test_ri

rice	rainfed	RICE.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri
rice	rainfed	RICE.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri
rice	rainfed	RICE.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri
rice	rainfed	RICE.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri
rice	rainfed	RICE.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri
rice	rainfed	RICE.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_rice__rainfed_yield_mean@ricky_DSSAT_h15test_ri



soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb
soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb
soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb
soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb
soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb
soybeans	irrigated	SOYB.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEOnnnIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_soybeans__irrigated_yield_mean@ricky_DSSAT_h15test_sb

soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb
soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb
soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb
soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb
soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb
soybeans	rainfed	SOYB.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEOnnnRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_soybeans__rainfed_yield_mean@ricky_DSSAT_h15test_sb



sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	base_2000	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_base_2000_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	gfdl/2055	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	hadgem/2055	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	ipsl/2055	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	miroc/2055	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	irrigated	SUGC.I_physical_area@spam2005_30may14	noresm/2055	CANE_best_yield_H15TEST__scK002canegroIR_369_d0_h15test__deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_p0_sugarcane__irrigated_yield_mean@ricky_DSSAT_h15test_sc

sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	base_2000	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_base_2000_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	gfdl/2055	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	hadgem/2055	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	ipsl/2055	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	miroc/2055	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc
sugarcane	rainfed	SUGC.R_physical_area@spam2005_30may14	noresm/2055	CANE_best_yield_H15TEST__scK002canegroRF_369_d0_h15test__deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_p0_sugarcane__rainfed_yield_mean@ricky_DSSAT_h15test_sc


sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg
sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg
sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg
sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg
sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg
sorghum	irrigated	SORG.I_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslIR_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_sorghum__irrigated_yield_mean@ricky_DSSAT_h15test_sg

sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	base_2000	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_base_2000_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg
sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	gfdl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg
sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	hadgem/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg
sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	ipsl/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg
sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	miroc/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg
sorghum	rainfed	SORG.R_physical_area@spam2005_30may14	noresm/2055	best_yield_H15TEST__GEObslRF_369_d0_h15test_gremlin_irrigated_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_sorghum__rainfed_yield_mean@ricky_DSSAT_h15test_sg


wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	base_2000	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_base_2000_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh
wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	gfdl/2055	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh
wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	hadgem/2055	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh
wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	ipsl/2055	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh
wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	miroc/2055	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh
wheat	irrigated	WHEA.I_physical_area@spam2005_30may14	noresm/2055	wintermix_best_yield_H15TEST__GEObslMEANIR_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_springwheat__irrigated_yield_mean@ricky_DSSAT_h15test_wh

wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	base_2000	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_base_2000_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh
wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	gfdl/2055	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh
wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	hadgem/2055	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh
wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	ipsl/2055	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh
wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	miroc/2055	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_miroc_esm_chem__future_rcp8p5_2041_2070_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh
wheat	rainfed	WHEA.R_physical_area@spam2005_30may14	noresm/2055	wintermix_best_yield_H15TEST__GEObslMEANRF_369_d0_h15test_gremlin_spring_wheat_deltaONpikNOV_noresm1_m__future_rcp8p5_2041_2070_springwheat__rainfed_yield_mean@ricky_DSSAT_h15test_wh







"


starter_brute_force_list=\
"
MONTH	YEAR	RICE.I_physical_area@spam2005_v3	rice/IR	scr_ALLENSO_riK001IR_379_ENSO_Historical_d0_allenso__MONTH_deltaONpikNOV_base_2000_p0_rice__irrigated_nonCLIMATE_real_YEARINDEX@ricky_DSSAT_seasia_enso
MONTH	YEAR	RICE.R_physical_area@spam2005_v3	rice/RF	scr_ALLENSO_riK001RF_379_ENSO_Historical_d0_allenso__MONTH_deltaONpikNOV_base_2000_p0_rice__rainfed_nonCLIMATE_real_YEARINDEX@ricky_DSSAT_seasia_enso

MONTH	YEAR	MAIZ.I_physical_area@spam2005_v3	maize/IR	scr_ALLENSO_mzK014IR_379_ENSO_Historical_d0_allenso__MONTH_deltaONpikNOV_base_2000_p0_maize__irrigated_nonCLIMATE_real_YEARINDEX@ricky_DSSAT_seasia_enso
MONTH	YEAR	MAIZ.R_physical_area@spam2005_v3	maize/RF	scr_ALLENSO_mzK014RF_379_ENSO_Historical_d0_allenso__MONTH_deltaONpikNOV_base_2000_p0_maize__rainfed_nonCLIMATE_real_YEARINDEX@ricky_DSSAT_seasia_enso
"

brute_force_list=""

for (( year=1951 ; year <= 2009 ; year++ )); do

  # the magical first year...
  first_year=1951

  # i need to compute which year index corresponds to this year...
  let "year_index = year - first_year"

for (( month=1 ; month <= 12 ; month++ )); do

brute_force_list="$brute_force_list
`echo "$starter_brute_force_list" | sed "s/YEARINDEX/$year_index/g ; s/YEAR/$year/g ; s/MONTH/$month/g"`"

done # month
done # year


fi # cutout AAA


echo ";; 1 ;;"

brute_force_list=\
"
groundnuts	IR	GROU.I_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEObslgroundnutsIR_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
groundnuts	IR	GROU.I_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEObslgroundnutsIR_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
groundnuts	IR	GROU.I_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEObslgroundnutsIR_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
groundnuts	IR	GROU.I_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEObslgroundnutsIR_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
groundnuts	RF	GROU.R_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEObslgroundnutsRF_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
groundnuts	RF	GROU.R_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEObslgroundnutsRF_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
groundnuts	RF	GROU.R_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEObslgroundnutsRF_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
groundnuts	RF	GROU.R_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEObslgroundnutsRF_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean

sorghum	IR	SORG.I_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEObslsorghumIR_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
sorghum	IR	SORG.I_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEObslsorghumIR_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
sorghum	IR	SORG.I_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEObslsorghumIR_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
sorghum	IR	SORG.I_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEObslsorghumIR_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
sorghum	RF	SORG.R_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEObslsorghumRF_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
sorghum	RF	SORG.R_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEObslsorghumRF_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
sorghum	RF	SORG.R_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEObslsorghumRF_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
sorghum	RF	SORG.R_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEObslsorghumRF_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean

maize	IR	MAIZ.I_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEOfixIR_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
maize	IR	MAIZ.I_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEOfixIR_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
maize	IR	MAIZ.I_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEOfixIR_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
maize	IR	MAIZ.I_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEOfixIR_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
maize	RF	MAIZ.R_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__GEOfixRF_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
maize	RF	MAIZ.R_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__GEOfixRF_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
maize	RF	MAIZ.R_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__GEOfixRF_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
maize	RF	MAIZ.R_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__GEOfixRF_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean

rice	IR	RICE.I_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__riK001IR_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
rice	IR	RICE.I_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__riK001IR_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
rice	IR	RICE.I_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__riK001IR_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
rice	IR	RICE.I_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__riK001IR_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
rice	RF	RICE.R_physical_area@spam2005_v3r1	base_2000	best_yield_SENEGALA__riK001RF_379_d0_senegala__deltaONpikNOV_base_2000_p0_allcrops__either_yield_mean
rice	RF	RICE.R_physical_area@spam2005_v3r1	gfdl	best_yield_SENEGALA__riK001RF_379_d0_senegala__deltaONpikNOV_gfdl_esm2m__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
rice	RF	RICE.R_physical_area@spam2005_v3r1	hadgem2	best_yield_SENEGALA__riK001RF_379_d0_senegala__deltaONpikNOV_hadgem2_es__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
rice	RF	RICE.R_physical_area@spam2005_v3r1	ipsl	best_yield_SENEGALA__riK001RF_379_d0_senegala__deltaONpikNOV_ipsl_cm5a_lr__future_rcp8p5_2041_2070_p0_allcrops__either_yield_mean
"






source SOME_country_groupings.sh


# the countries to aggregate over are put in the "country_list_to_mask" variable
# it should have two columns with an optional third:
#
# country_csv: the list of country names in the region (separated by commas)
#              the vector map used is cntry05, so the names need to match
#              those used there. for DRC, Congo you have to change the comma
#              to an apostrophe ('). a workaround was created because of Cote d'Ivoire
#              so we just re-use that...
# short_name: a human readable short name for the region
# invert_flag (optional): if the third column has a value, all countries EXCEPT
#                         those listed on that line will be used
#
# country_csv / short name

# country_csv / short name / vector to use / column to use


feed_the_future_target_zones=\
"
World	World/all	sub_national	CNTRY_NAME
Bangladesh	Bangladesh/all	sub_national	CNTRY_NAME
Cambodia	Cambodia/all	sub_national	CNTRY_NAME
Ethiopia	Ethiopia/all	sub_national	CNTRY_NAME
Ghana	Ghana/all	sub_national	CNTRY_NAME
Guatemala	Guatemala/all	sub_national	CNTRY_NAME
Haiti	Haiti/all	sub_national	CNTRY_NAME
Honduras	Honduras/all	sub_national	CNTRY_NAME
Kenya	Kenya/all	sub_national	CNTRY_NAME
Liberia	Liberia/all	sub_national	CNTRY_NAME
Malawi	Malawi/all	sub_national	CNTRY_NAME
Mali	Mali/all	sub_national	CNTRY_NAME
Mozambique	Mozambique/all	sub_national	CNTRY_NAME
Nepal	Nepal/all	sub_national	CNTRY_NAME
Rwanda	Rwanda/all	sub_national	CNTRY_NAME
Senegal	Senegal/all	sub_national	CNTRY_NAME
Tanzania	Tanzania/all	sub_national	CNTRY_NAME
Uganda	Uganda/all	sub_national	CNTRY_NAME
Zambia	Zambia/all	sub_national	CNTRY_NAME


World	World/FtFZones	feed_the_future_target_zones@various_vectors	cat
262,263	Bangladesh/FtFZones	feed_the_future_target_zones@various_vectors	cat
258,261,259,260	Cambodia/FtFZones	feed_the_future_target_zones@various_vectors	cat
351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426	Ethiopia/FtFZones	feed_the_future_target_zones@various_vectors	cat
264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322	Ghana/FtFZones	feed_the_future_target_zones@various_vectors	cat
253,254,255,256,257	Guatemala/FtFZones	feed_the_future_target_zones@various_vectors	cat
235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252	Haiti/FtFZones	feed_the_future_target_zones@various_vectors	cat
229,230,231,232,233,234	Honduras/FtFZones	feed_the_future_target_zones@various_vectors	cat
1,2,3,4,5	Kenya/FtFZones	feed_the_future_target_zones@various_vectors	cat
6,7,8,9,10,11	Liberia	/FtFZones@various_vectors	cat
323,324,325,326,327,328,329	Malawi/FtFZones	feed_the_future_target_zones@various_vectors	cat
427,428,429	Mali/FtFZones	feed_the_future_target_zones@various_vectors	cat
12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30	Mozambique/FtFZones	feed_the_future_target_zones@various_vectors	cat
209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228	Nepal/FtFZones	feed_the_future_target_zones@various_vectors	cat
31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172	Rwanda/FtFZones	feed_the_future_target_zones@various_vectors	cat
173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197	Senegal/FtFZones	feed_the_future_target_zones@various_vectors	cat
430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,449,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464	Tanzania/FtFZones	feed_the_future_target_zones@various_vectors	cat
198,199,200,201,202,203,204,205,206,207,208	Uganda/FtFZones	feed_the_future_target_zones@various_vectors	cat
330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350	Zambia/FtFZones	feed_the_future_target_zones@various_vectors	cat




263	Bangladesh/Barisal	feed_the_future_target_zones@various_vectors	cat
262	Bangladesh/Khulna	feed_the_future_target_zones@various_vectors	cat
258	Cambodia/Batdambang	feed_the_future_target_zones@various_vectors	cat
261	Cambodia/Kampong Thum	feed_the_future_target_zones@various_vectors	cat
259	Cambodia/Pouthisat	feed_the_future_target_zones@various_vectors	cat
260	Cambodia/Siemreab	feed_the_future_target_zones@various_vectors	cat
410,411,412,413	Ethiopia/Afar	feed_the_future_target_zones@various_vectors	cat
394,395,396.397.398.399,400,401,402,403,404,405,406,407,408	Ethiopia/Amhara	feed_the_future_target_zones@various_vectors	cat
409	Ethiopia/Benishangul Gumuz	feed_the_future_target_zones@various_vectors	cat
351,352,353,354,355,356,357,358,359,360,361,362,365,367,369,370,371,373,374,375,376,378,379,380,385,386,387,414,415,416,417,418,419	Ethiopia/Oromia	feed_the_future_target_zones@various_vectors	cat
363,364,366,368,372,377,381,382,383,384,426	Ethiopia/SNNP	feed_the_future_target_zones@various_vectors	cat
420,421,422,423,424,425	Ethiopia/Somali	feed_the_future_target_zones@various_vectors	cat
388,389,390,391,392,393	Ethiopia/Tigray	feed_the_future_target_zones@various_vectors	cat
280,282,285,294,316,317,318,319,320	Ghana/Brong Ahafo	feed_the_future_target_zones@various_vectors	cat
264,273,276,278,281,283,284,286,287,288,290,291,292,293,306,307,308,309,310,311,312,313,314,315,321,322	Ghana/Northern	feed_the_future_target_zones@various_vectors	cat
269,270,271,275,277,279,299,300,301,302,303,304,305	Ghana/Upper East	feed_the_future_target_zones@various_vectors	cat
265,266,267,268,272,274,289,295,296,297,298	Ghana/Upper West	feed_the_future_target_zones@various_vectors	cat
253	Guatemala/Chimaltenango	feed_the_future_target_zones@various_vectors	cat
254	Guatemala/Huehuetenango	feed_the_future_target_zones@various_vectors	cat
255	Guatemala/Quiche	feed_the_future_target_zones@various_vectors	cat
256	Guatemala/San Marcos	feed_the_future_target_zones@various_vectors	cat
257	Guatemala/Totonicapan	feed_the_future_target_zones@various_vectors	cat
239	Haiti/L'Artibonite	feed_the_future_target_zones@various_vectors	cat
240,241,242,243,244	Haiti/Nord	feed_the_future_target_zones@various_vectors	cat
245,246,247	Haiti/Nord-Est	feed_the_future_target_zones@various_vectors	cat
235,236,237,238,248,249,250,251,252	Haiti/Ouest	feed_the_future_target_zones@various_vectors	cat
229	Honduras/Copan	feed_the_future_target_zones@various_vectors	cat
230	Honduras/Intibuca	feed_the_future_target_zones@various_vectors	cat
231	Honduras/La Paz	feed_the_future_target_zones@various_vectors	cat
232	Honduras/Lempira	feed_the_future_target_zones@various_vectors	cat
233	Honduras/Ocotepeque	feed_the_future_target_zones@various_vectors	cat
234	Honduras/Santa Barbara	feed_the_future_target_zones@various_vectors	cat
1	Kenya/Taita Taveta	feed_the_future_target_zones@various_vectors	cat
2	Kenya/Kitui	feed_the_future_target_zones@various_vectors	cat
3	Kenya/Machakos	feed_the_future_target_zones@various_vectors	cat
4	Kenya/Makueni	feed_the_future_target_zones@various_vectors	cat
5	Kenya/Meru	feed_the_future_target_zones@various_vectors	cat
10	Liberia/Bong	feed_the_future_target_zones@various_vectors	cat
11	Liberia/GrandBassa	feed_the_future_target_zones@various_vectors	cat
6	Liberia/Lofa	feed_the_future_target_zones@various_vectors	cat
7	Liberia/Margibi	feed_the_future_target_zones@various_vectors	cat
8	Liberia/Montserrado	feed_the_future_target_zones@various_vectors	cat
9	Liberia/Nimba	feed_the_future_target_zones@various_vectors	cat
327	Malawi/Mangochi	feed_the_future_target_zones@various_vectors	cat
324	Malawi/Dedza	feed_the_future_target_zones@various_vectors	cat
325	Malawi/Lilongwe	feed_the_future_target_zones@various_vectors	cat
328	Malawi/Mchinji	feed_the_future_target_zones@various_vectors	cat
329	Malawi/Ntcheu	feed_the_future_target_zones@various_vectors	cat
323	Malawi/Balaka	feed_the_future_target_zones@various_vectors	cat
326	Malawi/Machinga	feed_the_future_target_zones@various_vectors	cat
427	Mali/Mopti	feed_the_future_target_zones@various_vectors	cat
428	Mali/Segou	feed_the_future_target_zones@various_vectors	cat
429	Mali/Sikasso	feed_the_future_target_zones@various_vectors	cat
12,13,14,15,16	Mozambique/Manica	feed_the_future_target_zones@various_vectors	cat
17,18,19,20,21,22,23,24,25	Mozambique/Nampula	feed_the_future_target_zones@various_vectors	cat
26,27,28,29,30	Mozambique/Zambezia	feed_the_future_target_zones@various_vectors	cat
223,224,225,226,227,228	Nepal/Far-Western	feed_the_future_target_zones@various_vectors	cat
213,214,215,216,217,218,219,220,221,222	Nepal/Mid-Western	feed_the_future_target_zones@various_vectors	cat
209,210,211,212	Nepal/Western	feed_the_future_target_zones@various_vectors	cat
43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62	Rwanda/Butare	feed_the_future_target_zones@various_vectors	cat
63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79	Rwanda/Byumba	feed_the_future_target_zones@various_vectors	cat
80,81,82,83,84,85,86,87,88,89	Rwanda/Cyangugu	feed_the_future_target_zones@various_vectors	cat
90,91,92,93,94,95,96,97,98,99,100,101,102	Rwanda/Gikongoro	feed_the_future_target_zones@various_vectors	cat
103,104,105,106,107,108,109,110,111,112,113,114	Rwanda/Gisenyi	feed_the_future_target_zones@various_vectors	cat
115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131	Rwanda/Gitarama	feed_the_future_target_zones@various_vectors	cat
132,133,134,135,136,137,138,139,140,141,142	Rwanda/Kibungu	feed_the_future_target_zones@various_vectors	cat
143,144,145,146,147,148,149,150,151	Rwanda/Kibuye	feed_the_future_target_zones@various_vectors	cat
31,32,33,34,35,36,37,38,39,40,41,42,152,153,154,155,156	Rwanda/Kigali	feed_the_future_target_zones@various_vectors	cat
157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172	Rwanda/Ruhengeri	feed_the_future_target_zones@various_vectors	cat
173,174,175	Senegal/Fatick	feed_the_future_target_zones@various_vectors	cat
176,177,178,179	Senegal/Kaolack	feed_the_future_target_zones@various_vectors	cat
180,181,182	Senegal/Kolda	feed_the_future_target_zones@various_vectors	cat
183,184,197	Senegal/Matam	feed_the_future_target_zones@various_vectors	cat
185,186,187,188,189	Senegal/Saint-Louis	feed_the_future_target_zones@various_vectors	cat
190,191,192,193,194,195	Senegal/Tambacounda	feed_the_future_target_zones@various_vectors	cat
196	Senegal/Thies	feed_the_future_target_zones@various_vectors	cat
430,431,432,433,434	Tanzania/Dodoma	feed_the_future_target_zones@various_vectors	cat
435,436,437,438,439,440,441	Tanzania/Iringa	feed_the_future_target_zones@various_vectors	cat
442,443,444,445,446,447	Tanzania/Manyara	feed_the_future_target_zones@various_vectors	cat
448,449,450,451,452,453,454,455	Tanzania/Mbeya	feed_the_future_target_zones@various_vectors	cat
456,457,458,459,460,461	Tanzania/Morogoro	feed_the_future_target_zones@various_vectors	cat
462,463	Tanzania/Zanzibar South and Central	feed_the_future_target_zones@various_vectors	cat
464	Tanzania/Zanzibar West	feed_the_future_target_zones@various_vectors	cat
198	Uganda/Gulu	feed_the_future_target_zones@various_vectors	cat
199	Uganda/Jinja	feed_the_future_target_zones@various_vectors	cat
200	Uganda/Kamuli	feed_the_future_target_zones@various_vectors	cat
201	Uganda/Kamwenge	feed_the_future_target_zones@various_vectors	cat
202	Uganda/Kasese	feed_the_future_target_zones@various_vectors	cat
203	Uganda/Kibale	feed_the_future_target_zones@various_vectors	cat
204	Uganda/Luwero	feed_the_future_target_zones@various_vectors	cat
205	Uganda/Masindi	feed_the_future_target_zones@various_vectors	cat
206	Uganda/Mubende	feed_the_future_target_zones@various_vectors	cat
207	Uganda/Nebbi	feed_the_future_target_zones@various_vectors	cat
208	Uganda/Pader	feed_the_future_target_zones@various_vectors	cat
331	Zambia/Kabwe	feed_the_future_target_zones@various_vectors	cat
332,344	Zambia/Chadiza	feed_the_future_target_zones@various_vectors	cat
333	Zambia/Chama	feed_the_future_target_zones@various_vectors	cat
330	Zambia/Chibombo	feed_the_future_target_zones@various_vectors	cat
334,345	Zambia/Chipata	feed_the_future_target_zones@various_vectors	cat
340	Zambia/Chongwe	feed_the_future_target_zones@various_vectors	cat
341	Zambia/Kafue	feed_the_future_target_zones@various_vectors	cat
335,346	Zambia/Katete	feed_the_future_target_zones@various_vectors	cat
342	Zambia/Luangwa	feed_the_future_target_zones@various_vectors	cat
336,347	Zambia/Lundazi	feed_the_future_target_zones@various_vectors	cat
343	Zambia/Lusaka	feed_the_future_target_zones@various_vectors	cat
337,348	Zambia/Mambwe	feed_the_future_target_zones@various_vectors	cat
338,349	Zambia/Nyimba	feed_the_future_target_zones@various_vectors	cat
339,350	Zambia/Petauke	feed_the_future_target_zones@various_vectors	cat
"

senegal_notes=\
"
Dakar	Dakar 638
Thies & Diourbel	Thies 659 & Diourbel 654
Northern	Saint-Louis 658 & Matam
Central	Louga 657 , Kaolack 656, Fatick 655 & Kaffrine
Southern	Ziguinchor 674 , Sedhiou, Kolda 668, Kedougou & Tambacounda 685

*638|637|SG01|SEN-DKR|Dakar|SG|SEN|Senegal|1755086|Region|Region|561.72|216.88|1|1
*654|653|SG03|SEN-DRB|Diourbel|SG|SEN|Senegal|729707|Region|Region|4193.75|1619.21|6|1
*655|654|SG09|SEN-FTC|Fatick|SG|SEN|Senegal|560481|Region|Region|8510.98|3286.09|2|1
*656|655|SG10|SEN-KLC|Kaolack|SG|SEN|Senegal|961367|Region|Region|15205.03|5870.66|5|1
*657|656|SG08|SEN-LOU|Louga|SG|SEN|Senegal|577473|Region|Region|29575.99|11419.29|7|1
*658|657|SG04|SEN-STL|Saint-Louis|SG|SEN|Senegal|800996|Region|Region|44988.92|17370.22|10|0
*659|658|SG07|SEN-THI|Thies|SG|SEN|Senegal|1116440|Region|Region|6596.91|2547.07|12|1
*668|667|SG11|SEN-KLD|Kolda|SG|SEN|Senegal|714528|Region|Region|20999.48|8107.9|6|1
*674|673|SG12|SEN-ZGN|Ziguinchor|SG|SEN|Senegal|464757|Region|Region|6997.82|2701.86|12|1
*685|684|SG05|SEN-TMB|Tambacounda|SG|SEN|Senegal|435719|Region|Region|59100.4|22818.66|3|1
"



senegal_list_to_mask=\
"
Dakar	Dakar	sub_national	ADMIN_NAME
Thies,Diourbel	Thies and Diourbel	sub_national	ADMIN_NAME
Saint-Louis	Northern	sub_national	ADMIN_NAME
Louga,Kaolack,Fatick	Central	sub_national	ADMIN_NAME
Ziguinchor,Kolda,Tambacounda	Southern	sub_national	ADMIN_NAME
"




ecuador_list_to_mask=\
"
Ecuador	Ecudor	sub_national	CNTRY_NAME

Azuay	Azuay	sub_national	ADMIN_NAME
El Oro	El Oro	sub_national	ADMIN_NAME
Loja	Loja	sub_national	ADMIN_NAME
Zamora-Chinchipe	Zamora-Chinchipe	sub_national	ADMIN_NAME
Galapagos	Galapagos	sub_national	ADMIN_NAME
Bolivar	Bolivar	sub_national	ADMIN_NAME
Canar	Canar	sub_national	ADMIN_NAME
Cotopaxi	Cotopaxi	sub_national	ADMIN_NAME
Guayas	Guayas	sub_national	ADMIN_NAME
Los Rios	Los Rios	sub_national	ADMIN_NAME
Manabi	Manabi	sub_national	ADMIN_NAME
Chimborazo	Chimborazo	sub_national	ADMIN_NAME
Morona-Santiago	Morona-Santiago	sub_national	ADMIN_NAME
Napo	Napo	sub_national	ADMIN_NAME
Pichincha	Pichincha	sub_national	ADMIN_NAME
Pastaza	Pastaza	sub_national	ADMIN_NAME
Tungurahua	Tungurahua	sub_national	ADMIN_NAME
Esmeraldas	Esmeraldas	sub_national	ADMIN_NAME
Carchi	Carchi	sub_national	ADMIN_NAME
Imbabura	Imbabura	sub_national	ADMIN_NAME
Sucumbios	Sucumbios	sub_national	ADMIN_NAME
"


maize_list_to_mask=\
"
United States	USA	cntry05	CNTRY_NAME
Canada	Canada	cntry05	CNTRY_NAME
Illinois	Illinois	sub_national	ADMIN_NAME
Indiana	Indiana	sub_national	ADMIN_NAME
Iowa	Iowa	sub_national	ADMIN_NAME
Minnesota	Minnesota	sub_national	ADMIN_NAME
Nebraska	Nebraska	sub_national	ADMIN_NAME
Ohio	Ohio	sub_national	ADMIN_NAME
Illinois,Indiana,Iowa,Minnesota,Nebraska,Ohio	Major Together	sub_national	ADMIN_NAME
"

taiwan_box=\
"
1	Taiwan	taiwan_box@ricky_DSSAT_chad	cat
"


gtap_list_to_mask=\
"
1	twn	taiwan_box@ricky_DSSAT_chad	cat
`echo "$gtap_country_regions_codes" | grep -v "^$" | sed "s/$/	cntry05	CNTRY_NAME/g"`
"


philippines_list_to_mask=\
"
Philippines	Philippines	spam2005_country_code_vector@spam2005_30may14	cntry_name
World	World	spam2005_country_code_vector@spam2005_30may14	cntry_name
PHI_PHL	Philippines FPU	food_production_units_v2_320polygons_new	New_FPU
World	World FPUs	food_production_units_v2_320polygons_new	New_FPU
"


kenya_list_to_mask=\
"
high rainfall	high rainfall	kenya_district_level_aez@ricky_DSSAT_gator	aez_manual
semiarid	semiarid	kenya_district_level_aez@ricky_DSSAT_gator	aez_manual
arid	arid	kenya_district_level_aez@ricky_DSSAT_gator	aez_manual
"





lac_cges_list_to_mask=\
"

3059,3072,3074	TZA1	TZA_adm1@ricky_junk_0	ID_1
3056,3064,3068	TZA2	TZA_adm1@ricky_junk_0	ID_1
3065,3070	TZA3	TZA_adm1@ricky_junk_0	ID_1
3055,3071	TZA4	TZA_adm1@ricky_junk_0	ID_1
3062,3067	TZA5	TZA_adm1@ricky_junk_0	ID_1
3053,3057,3058,3061,3066,3069,3076,3077	TZA6	TZA_adm1@ricky_junk_0	ID_1
3054,3073	TZA7	TZA_adm1@ricky_junk_0	ID_1
3052,3060,3063,3075	TZA8	TZA_adm1@ricky_junk_0	ID_1

39062,39086,39088,39089,39090,39064,39065,39054,39061,39036,39102,39094,39095	ZMB1	ZMB_adm2@ricky_junk_0	ID_2
39031,39085,39087,39032,39063,39033,39052,39091,39034,39092,39035,39093	ZMB2	ZMB_adm2@ricky_junk_0	ID_2
39047,39048,39049,39050,39051,39053,39101	ZMB3	ZMB_adm2@ricky_junk_0	ID_2
39096,39097,39098,39099	ZMB4	ZMB_adm2@ricky_junk_0	ID_2
39078,39055,39037,39066,39038,39067,39068,39079,39039,39069,39070,39080,39056,39040,39041,39042,39071,39057,39043,39072,39058,39073,39044,39074,39075,39045,39081,39076,39059,39082,39077,39060,39046,39100,39083,39084	ZMB5	ZMB_adm2@ricky_junk_0	ID_2

1957,1960,1968,1969,1975	MWI1	MWI_adm1@ricky_junk_0	ID_1
1958,1959,1961,1962,1965,1970,1973,1972,1976	MWI2	MWI_adm1@ricky_junk_0	ID_1
1953,1954,1955,1956,1963,1964,1966,1967,1971,1974,1977,1978	MWI3	MWI_adm1@ricky_junk_0	ID_1

3092,3093,3100,3102,3111,3112,3119,3120,3121,3123,3128,3130,3134	UGA1	UGA_adm1@ricky_junk_0	ID_1
3081,3084,3087,3088,3091,3094,3097,3099,3106,3114,3115,3127,3131,3132,3133	UGA2	UGA_adm1@ricky_junk_0	ID_1
3078,3079,3080,3085,3104,3105,3110,3117,3118,3122,3124,3126,3135	UGA3	UGA_adm1@ricky_junk_0	ID_1
3101,3082,3083,3086,3089,3090,3095,3096,3098,3103,3107,3113,3116,3125,3129	UGA4	UGA_adm1@ricky_junk_0	ID_1


1914,1919,1920	MOZ1	MOZ_adm1@ricky_junk_0	ID_1
1917,1921,1922,1923	MOZ2	MOZ_adm1@ricky_junk_0	ID_1
1915,1916,1918	MOZ3	MOZ_adm1@ricky_junk_0	ID_1

1518,1521	KEN1	KEN_adm1@ricky_junk_0	ID_1
1519	KEN2	KEN_adm1@ricky_junk_0	ID_1
1520	KEN3	KEN_adm1@ricky_junk_0	ID_1
1522	KEN4	KEN_adm1@ricky_junk_0	ID_1
1523	KEN5	KEN_adm1@ricky_junk_0	ID_1
1524	KEN6	KEN_adm1@ricky_junk_0	ID_1
1525	KEN7	KEN_adm1@ricky_junk_0	ID_1

"

cambodia_list_to_mask=\
"
Batdambang	Batdambang Cambodia	sub_national	ADMIN_NAME
Kaoh Kong	Kaoh Kong Cambodia	sub_national	ADMIN_NAME
Pouthisat	Pouthisat Cambodia	sub_national	ADMIN_NAME
Siemreab-Otdar Meanchey	Siemreab-Otdar Meanchey Cambodia	sub_national	ADMIN_NAME
Kampong Cham	Kampong Cham Cambodia	sub_national	ADMIN_NAME
Kampong Chhnang	Kampong Chhnang Cambodia	sub_national	ADMIN_NAME
Kandal	Kandal Cambodia	sub_national	ADMIN_NAME
Kampong Spoe	Kampong Spoe Cambodia	sub_national	ADMIN_NAME
Kampong Thum	Kampong Thum Cambodia	sub_national	ADMIN_NAME
Phnum Penh	Phnum Penh Cambodia	sub_national	ADMIN_NAME
Prey Veng	Prey Veng Cambodia	sub_national	ADMIN_NAME
Preah Vihear	Preah Vihear Cambodia	sub_national	ADMIN_NAME
Stoeng Treng	Stoeng Treng Cambodia	sub_national	ADMIN_NAME
Kracheh	Kracheh Cambodia	sub_national	ADMIN_NAME
Mondol Kiri	Mondol Kiri Cambodia	sub_national	ADMIN_NAME
Rotanokiri	Rotanokiri Cambodia	sub_national	ADMIN_NAME
Kampot	Kampot Cambodia	sub_national	ADMIN_NAME
Svay Rieng	Svay Rieng Cambodia	sub_national	ADMIN_NAME
Takev	Takev Cambodia	sub_national	ADMIN_NAME
"

laos_list_to_mask=\
"
Bokeo	Bokeo Laos	sub_national	ADMIN_NAME
Louang Namtha	Louang Namtha Laos	sub_national	ADMIN_NAME
Xaignabouri	Xaignabouri Laos	sub_national	ADMIN_NAME
Champasak	Champasak Laos	sub_national	ADMIN_NAME
Saravan	Saravan Laos	sub_national	ADMIN_NAME
Savannakhet	Savannakhet Laos	sub_national	ADMIN_NAME
Viangchan	Viangchan Laos	sub_national	ADMIN_NAME
Vientiane	Vientiane Laos	sub_national	ADMIN_NAME
Xiangkhoang	Xiangkhoang Laos	sub_national	ADMIN_NAME
Houaphan	Houaphan Laos	sub_national	ADMIN_NAME
Louangphrabang	Louangphrabang Laos	sub_national	ADMIN_NAME
Oudomxai	Oudomxai Laos	sub_national	ADMIN_NAME
Phongsali	Phongsali Laos	sub_national	ADMIN_NAME
Borikhamxai	Borikhamxai Laos	sub_national	ADMIN_NAME
Khammouan	Khammouan Laos	sub_national	ADMIN_NAME
Attapeu	Attapeu Laos	sub_national	ADMIN_NAME
Xekong	Xekong Laos	sub_national	ADMIN_NAME
"

myanmar_list_to_mask=\
"
Karen State	Karen State Myanmar	sub_national	ADMIN_NAME
Kayah State	Kayah State Myanmar	sub_national	ADMIN_NAME
Mandalay	Mandalay Myanmar	sub_national	ADMIN_NAME
Pegu	Pegu Myanmar	sub_national	ADMIN_NAME
Rangoon	Rangoon Myanmar	sub_national	ADMIN_NAME
Mon State	Mon State Myanmar	sub_national	ADMIN_NAME
Arakan State	Arakan State Myanmar	sub_national	ADMIN_NAME
Chin State	Chin State Myanmar	sub_national	ADMIN_NAME
Irrawaddy	Irrawaddy Myanmar	sub_national	ADMIN_NAME
Magwe	Magwe Myanmar	sub_national	ADMIN_NAME
Shan State	Shan State Myanmar	sub_national	ADMIN_NAME
Tenasserim	Tenasserim Myanmar	sub_national	ADMIN_NAME
Kachin State	Kachin State Myanmar	sub_national	ADMIN_NAME
Sagaing	Sagaing Myanmar	sub_national	ADMIN_NAME
"

philippines_list_to_mask=\
"
Central Visayas	Central Visayas Philippines	sub_national	ADMIN_NAME
Western Mindanao	Western Mindanao Philippines	sub_national	ADMIN_NAME
Western Visayas	Western Visayas Philippines	sub_national	ADMIN_NAME
Bicol	Bicol Philippines	sub_national	ADMIN_NAME
Cordillera Administrative Region	Cordillera Administrative Region Philippines	sub_national	ADMIN_NAME
Cagayan Valley	Cagayan Valley Philippines	sub_national	ADMIN_NAME
Central Luzon	Central Luzon Philippines	sub_national	ADMIN_NAME
Ilocos	Ilocos Philippines	sub_national	ADMIN_NAME
National Capital Region	National Capital Region Philippines	sub_national	ADMIN_NAME
Southern Tagalog	Southern Tagalog Philippines	sub_national	ADMIN_NAME
Central Mindanao	Central Mindanao Philippines	sub_national	ADMIN_NAME
Eastern Visayas	Eastern Visayas Philippines	sub_national	ADMIN_NAME
Northern Mindanao	Northern Mindanao Philippines	sub_national	ADMIN_NAME
Southern Mindanao	Southern Mindanao Philippines	sub_national	ADMIN_NAME
"

vietnam_list_to_mask=\
"
Quang Ninh	Quang Ninh Vietnam	sub_national	ADMIN_NAME
Tay Ninh	Tay Ninh Vietnam	sub_national	ADMIN_NAME
Lai Chau	Lai Chau Vietnam	sub_national	ADMIN_NAME
Bac Thai	Bac Thai Vietnam	sub_national	ADMIN_NAME
Lao Cai	Lao Cai Vietnam	sub_national	ADMIN_NAME
Lang Son	Lang Son Vietnam	sub_national	ADMIN_NAME
Son La	Son La Vietnam	sub_national	ADMIN_NAME
Thanh Hoa	Thanh Hoa Vietnam	sub_national	ADMIN_NAME
Tuyen Quang	Tuyen Quang Vietnam	sub_national	ADMIN_NAME
Yen Bai	Yen Bai Vietnam	sub_national	ADMIN_NAME
Hoa Binh	Hoa Binh Vietnam	sub_national	ADMIN_NAME
Hai Hung	Hai Hung Vietnam	sub_national	ADMIN_NAME
Ha Noi	Ha Noi Vietnam	sub_national	ADMIN_NAME
Ha Tay	Ha Tay Vietnam	sub_national	ADMIN_NAME
Ninh Binh	Ninh Binh Vietnam	sub_national	ADMIN_NAME
Nam Ha	Nam Ha Vietnam	sub_national	ADMIN_NAME
Vinh Phu	Vinh Phu Vietnam	sub_national	ADMIN_NAME
Ha Bac	Ha Bac Vietnam	sub_national	ADMIN_NAME
Hai Phong	Hai Phong Vietnam	sub_national	ADMIN_NAME
Thai Binh	Thai Binh Vietnam	sub_national	ADMIN_NAME
Ha Tinh	Ha Tinh Vietnam	sub_national	ADMIN_NAME
Nghe An	Nghe An Vietnam	sub_national	ADMIN_NAME
Quang Binh	Quang Binh Vietnam	sub_national	ADMIN_NAME
Dac Lac	Dac Lac Vietnam	sub_national	ADMIN_NAME
Gia Lai	Gia Lai Vietnam	sub_national	ADMIN_NAME
Khanh Hoa	Khanh Hoa Vietnam	sub_national	ADMIN_NAME
Lam Dong	Lam Dong Vietnam	sub_national	ADMIN_NAME
Ninh Thuan	Ninh Thuan Vietnam	sub_national	ADMIN_NAME
Phu Yen	Phu Yen Vietnam	sub_national	ADMIN_NAME
Song Be	Song Be Vietnam	sub_national	ADMIN_NAME
Binh Dinh	Binh Dinh Vietnam	sub_national	ADMIN_NAME
Kon Tum	Kon Tum Vietnam	sub_national	ADMIN_NAME
Quang Nam-Da Nang	Quang Nam-Da Nang Vietnam	sub_national	ADMIN_NAME
Quang Ngai	Quang Ngai Vietnam	sub_national	ADMIN_NAME
Quang Tri	Quang Tri Vietnam	sub_national	ADMIN_NAME
Thua Thien Hue	Thua Thien Hue Vietnam	sub_national	ADMIN_NAME
Ba Ria-Vung Tau	Ba Ria-Vung Tau Vietnam	sub_national	ADMIN_NAME
Binh Thuan	Binh Thuan Vietnam	sub_national	ADMIN_NAME
Dong Nai	Dong Nai Vietnam	sub_national	ADMIN_NAME
An Giang	An Giang Vietnam	sub_national	ADMIN_NAME
Dong Thap	Dong Thap Vietnam	sub_national	ADMIN_NAME
Ho Chi Minh	Ho Chi Minh Vietnam	sub_national	ADMIN_NAME
Kien Giang	Kien Giang Vietnam	sub_national	ADMIN_NAME
Long An	Long An Vietnam	sub_national	ADMIN_NAME
Tien Giang	Tien Giang Vietnam	sub_national	ADMIN_NAME
Ben Tre	Ben Tre Vietnam	sub_national	ADMIN_NAME
Can Tho	Can Tho Vietnam	sub_national	ADMIN_NAME
Minh Hai	Minh Hai Vietnam	sub_national	ADMIN_NAME
Soc Trang	Soc Trang Vietnam	sub_national	ADMIN_NAME
Tra Vinh	Tra Vinh Vietnam	sub_national	ADMIN_NAME
Vinh Long	Vinh Long Vietnam	sub_national	ADMIN_NAME
Cao Bang	Cao Bang Vietnam	sub_national	ADMIN_NAME
Ha Giang	Ha Giang Vietnam	sub_national	ADMIN_NAME
"




#list_to_mask=$myanmar_list_to_mask
#list_to_mask=$laos_list_to_mask

jlist_to_mask=\
"
$cambodia_list_to_mask
$philippines_list_to_mask
"

list_to_mask=$senegal_list_to_mask






#################################################
#,should not have to change anything below here #
#################################################

echo "-- starting --"

# reset the IFS
IFS="
"



### check to make sure that all the necessary rasters actually exist


get_mapset()
{
  together=$1

  raster_only=${together%%@*}


  without_raster=${together#$raster_only}
  mapset_only=${without_raster#@}

  if [ -z "$mapset_only" ]; then mapset_only=`g.gisenv get=MAPSET` ; fi

  echo "$mapset_only"
}

split_into_raster_and_mapset()
{
  together=$1

  raster_only=${together%%@*}

  without_raster=${together#$raster_only}
  mapset_only=${without_raster#@}

  echo "$raster_only	$mapset_only"
}




echo "- checking for missing rasters -"

echo "!!! skipping check !!!"
if [ 1 = 1 ]; then

  # get a list of all the maps
    spam_area_raster=`echo "$brute_force_list" | cut -f3`
                 now=`echo "$brute_force_list" | cut -f5`

  full_list_of_rasters=`echo "$spam_area_raster
$now" | sort | uniq`

  n_missing=0
  for raster_to_check in $full_list_of_rasters; do
     mapset_to_check=`get_mapset ${raster_to_check}` ; if [ -z "$mapset_to_check" ]; then mapset_to_check=`g.gisenv get=MAPSET` ; fi

      check_test=`g.mlist rast pat=${raster_to_check%%@*} mapset=${mapset_to_check}`

    if [ -z "$check_test" ]; then
      echo "MISSING: $raster_to_check"
      echo "   pat=[${raster_to_check%%@*}] mapset=[${mapset_to_check}]"
      let "n_missing++"
    fi
  done

  if [ $n_missing -gt 0 ]; then
    echo "!!! missing a total of $n_missing rasters that we need !!!"
    exit
  fi

fi


if [ 0 = 1 ]; then
  n_missing=0
  for crop_line in $brute_force_list; do
    # clear out the MASK, just to be sure
    g.remove MASK 2>/dev/null # hiding error messages

    # split up the line into the pieces that we can use
    spam_area_raster=`echo "$crop_line" | cut -f3`
                 now=`echo "$crop_line" | cut -f5`

    spam_mapset=`get_mapset ${spam_area_raster}` ; if [ -z "$spam_mapset" ];  then  spam_mapset=`g.gisenv get=MAPSET` ; fi
     now_mapset=`get_mapset ${now}`              ; if [ -z "$now_mapset" ];   then   now_mapset=`g.gisenv get=MAPSET` ; fi

     spam_test=`g.mlist rast pat=${spam_area_raster%%@*} mapset=${spam_mapset}`
      now_test=`g.mlist rast pat=${now%%@*}              mapset=${now_mapset}`

    if [ -z "$spam_test" ]; then
      echo "MISSING: $spam_area_raster"
      echo "   pat=[${spam_area_raster%%@*}] mapset=[${spam_mapset}]"
      let "n_missing++"
    fi

    if [ -z "$now_test" ]; then
      echo "MISSING: $now"
      echo "   pat=[${now%%@*}] mapset=[${now_mapset}]"
      let "n_missing++"
    fi


  done



  if [ $n_missing -gt 0 ]; then
    echo "!!! missing a total of $n_missing rasters that we need !!!"
    exit
  fi
fi # cutout

echo "- done checking for missing rasters -"






# make sure the output directory exists
mkdir -p $output_dir

# clear out any errant masks
g.remove MASK 1>/dev/null 2>/dev/null


# define our home-grown mask prefix
mask_prefix=deleteme_MASK_

### make the masks once up front...
mask_list="" # initialize with empty

for requested_mask_line in $list_to_mask
do

  invert="" # initialize with blank, just in case something stupid happens

  # split up the case into the pieces we need
    csv_list=`echo "$requested_mask_line" | cut -f1`
  short_name=`echo "$requested_mask_line" | cut -f2`
 vector_name=`echo "$requested_mask_line" | cut -f3`
 column_name=`echo "$requested_mask_line" | cut -f4`

  # set the short name to a default if it is not specified
  if [ -z "$short_name" ]; then
    short_name="$csv_list"
  fi

  # build up a grass friendly name for the mask
  mask_clean_name=`echo "$short_name" | sed "s/ /_/g ; s/'/_/g ; s/\./_/g ; s/\:/_/g ; s/\//_/g ; s/-/_/g ; s/,/_/g ; s/(/_/g ; s/)/_/g" `

 echo "-- starting {$short_name} --"

  # use a premade script to make up the mask
  make_vector_mask.sh $vector_name $column_name "$csv_list" $align_raster ${mask_prefix}${mask_clean_name}

# record this case in a new list to be used farther down
mask_list=\
"$mask_list
${mask_prefix}${mask_clean_name}	$short_name	$csv_list"

done

# dump the new list to the screen for our edification
echo "ML = [$mask_list]"




# define the function that does the hard work...
zero_area_list=""
summarize()
{

  # initialize some things so errors will be more apparent...
  total_production_NOW="ZZZ"  total_area_NOW="ZZZ" 
  yield_NOW="ZZZ" 
  percentage_production_change="ZZZ" percentage_area_change="ZZZ" percentage_yield_change="ZZZ"
  positive_area_NOW=ZZZ  percentage_positive_area_change=ZZZ


  # clear out any MASK in case there is one laying around for some reason
  g.remove MASK --q 1>/dev/null 2>/dev/null

  # pull out the info for this particular masking case that we are going to deal with
         mask_name=`echo "$mask_line" | cut -f1`
  mask_pretty_name=`echo "$mask_line" | cut -f2`

  # copy the appropriate mask into place and match up the region
  g.copy   rast=$mask_name,MASK --o
  g.region rast=$mask_name

  # compute some totals over this area and grab them into variables
  # we start with the total area under consideration
    total_area_NOW=`r.sum deleteme_area_NOW   --q | cut -d" " -f3`

  total_area_zero_test=`echo "if($total_area_NOW == 0) {1} else {0}" | bc`

#  echo "totalareaNOW=[$total_area_NOW] ; taztest = [$total_area_zero_test]"
  if [ $total_area_zero_test = 1 ]; then
          total_area_NOW=0
       positive_area_NOW=0
    total_production_NOW=0
               yield_NOW=0

  else

  # figure out how much area had positive yields
    positive_area_NOW=`r.sum deleteme_positive_now   --q | cut -d" " -f3`

  # determine the total production in the region
    total_production_NOW=`r.sum deleteme_production_NOW          --q | cut -d" " -f3`

  # compute the area-weighted-average-yield: total production divided by total area
      yield_NOW=`echo "scale=3 ; ($total_production_NOW   / $total_area_NOW  ) " | bc`
  fi

  # record the information in a long line to the output file
  echo "${crop}	${water_source}	${gcm}	$mask_pretty_name	$yield_NOW	$total_production_NOW	$total_area_NOW	$positive_area_NOW" >> $SB_file


  # clear out the mask to be a good citizen
  g.remove MASK --q 1>/dev/null 2>/dev/null


}




# build up the name of the soundbite output files
SB_file=${output_dir}SB_$id$mapset_`date +%d%b%y_%H%M`.txt
SB_notes_file=${SB_file%%.txt}.notes.txt

# start the notes file so we know where these numbers came from
echo -e "" >> $SB_notes_file
echo -e "run in mapset:\t`g.gisenv get=MAPSET`" >> $SB_notes_file
echo -e "" >> $SB_notes_file
echo -e "run in directory: `pwd`" >> $SB_notes_file
echo -e "run as $0" >> $SB_notes_file
echo -e "results file is: $SB_file" >> $SB_notes_file
echo -e "align raster: $align_raster" >> $SB_notes_file
echo "" >> $SB_notes_file
echo -e "--- cases ---" >> $SB_notes_file
echo -e "comment_1	comment_2	weighting_raster	comment_3	raster_of_interest" >> $SB_notes_file
echo "$brute_force_list" >> $SB_notes_file

echo "" >> $SB_notes_file
echo "" >> $SB_notes_file
echo "--- mask definitions ---" >> $SB_notes_file
echo "$list_to_mask" >> $SB_notes_file
echo "--- masks ---" >> $SB_notes_file
echo "$mask_list" >> $SB_notes_file

# create a header line for the output file
  echo "comment_1	comment_2	comment_3	region	average_value	total_value	total_area	positive_area" >> $SB_file


# clear out any MASK that might have been laying around
g.remove MASK --q 1>/dev/null 2>/dev/null


# now, run through all the crop cases
for crop_line in $brute_force_list; do
  # pull out the consituent parts
             crop=`echo "$crop_line" | cut -f1`
     water_source=`echo "$crop_line" | cut -f2`
 spam_area_raster=`echo "$crop_line" | cut -f3`
              gcm=`echo "$crop_line" | cut -f4`
              now=`echo "$crop_line" | cut -f5`


  # provide a status update
  echo "n=[$now]"

  # set the region
  g.region rast=$now
  g.region align=$spam_area_raster -a

  # clear out a bunch of temporary rasters that we will be re-using; this is so that
  # if something goes wrong, it won't continue on using the ones left over from last time through
  g.remove rast=deleteme_area_NOW,deleteme_positive_now,deleteme_production_NOW --q

  # build up the rasters to use in the summarizing process

  ### total area; pulling out the footprint for now and later
  r.mapcalc deleteme_area_NOW         = "$spam_area_raster * if(isnull($now),   null(), 1)" 2>&1 | grep -v "%"

  ### area with positive yield; pulling out the footprint for now and later
  r.mapcalc deleteme_positive_now   = "$spam_area_raster * if($now   > 0, 1, null())" 2>&1 | grep -v "%"

  ### impose a cap on yield growth for "$later"
  r.mapcalc deleteme_production_NOW   = "$spam_area_raster * $now" 2>&1 | grep -v "%"


 
  # now that we have the rasters prepared, let us summarize them for the different geographic regions
  for mask_line in $mask_list
  do

    summarize

  done


done # crop


g.remove MASK --q # clear it out just to make sure and be a good citizen







